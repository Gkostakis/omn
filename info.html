<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CTConsulting — AI Sustainability Agent</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%232d2d2d'/%3E%3Cpath d='M16 6 C10 6 6 10 6 16 C6 22 10 26 16 26 C22 26 26 22 26 16' stroke='%2382c98a' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3Ccircle cx='16' cy='16' r='4' fill='%2382c98a'/%3E%3C/svg%3E">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #1c1c1c;
    --bg2: #242424;
    --surface: #2a2a2a;
    --surface2: #333333;
    --text: #e8e8e6;
    --text-muted: #888884;
    --text-dim: #555552;
    --accent: #e8e8e6;
    --hairline: rgba(255,255,255,0.07);
    --bubble-bot: rgba(255,255,255,0.06);
    --bubble-user: rgba(255,255,255,0.10);
    --green: #82c98a;
    --green-dim: rgba(130,201,138,0.15);
    --font: 'Geist', 'IBM Plex Sans', sans-serif;
    --radius: 20px;
    --toggle-knob: #888;
    --toggle-bg: #3a3a3a;
  }

  [data-theme="light"] {
    --bg: #f0f0ec;
    --bg2: #eaeae6;
    --surface: #e4e4e0;
    --surface2: #d8d8d4;
    --text: #1c1c1c;
    --text-muted: #666662;
    --text-dim: #999994;
    --accent: #1c1c1c;
    --hairline: rgba(0,0,0,0.08);
    --bubble-bot: rgba(0,0,0,0.05);
    --bubble-user: rgba(0,0,0,0.08);
    --toggle-knob: #fff;
    --toggle-bg: #1c1c1c;
  }

  html, body {
    height: 100%;
    font-family: var(--font);
    background: var(--bg);
    color: var(--text);
    overflow: hidden;
    transition: background 0.3s, color 0.3s;
  }

  /* ══ PAGE SHELL ══ */
  .page {
    position: relative;
    height: 100vh;
    display: grid;
    grid-template-rows: auto 1fr auto;
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "header header"
      "messages intents"
      "input input";
  }

  /* ── HEADER ── */
  header {
    grid-area: header;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 28px;
    flex-shrink: 0;
    border-bottom: 1px solid var(--hairline);
    background: var(--bg);
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: var(--text);
  }

  /* CT diamond logo mark */
  .logo-mark {
    width: 28px;
    height: 28px;
    display: grid;
    place-items: center;
    flex-shrink: 0;
  }

  .logo-text {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-muted);
    letter-spacing: 0.01em;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .header-badge {
    display: flex;
    align-items: center;
    gap: 7px;
    font-size: 12px;
    font-weight: 400;
    color: var(--text-muted);
    letter-spacing: 0.01em;
  }

  #status-text {
    transition: opacity 0.2s;
  }

  /* status dot */
  .dot-live {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 0 2px rgba(130,201,138,0.25);
    animation: pulse 2.4s ease-in-out infinite;
    flex-shrink: 0;
  }
  @keyframes pulse {
    0%,100% { box-shadow: 0 0 0 2px rgba(130,201,138,0.25); }
    50%      { box-shadow: 0 0 0 5px rgba(130,201,138,0.08); }
  }

  /* restart button */
  .restart-btn {
    width: 30px; height: 30px;
    border-radius: 8px;
    border: 1px solid var(--hairline);
    background: transparent;
    cursor: pointer;
    display: grid; place-items: center;
    color: var(--text-muted);
    transition: all 0.15s;
  }
  .restart-btn:hover {
    background: var(--surface);
    color: var(--text);
  }
  .restart-btn svg {
    width: 14px; height: 14px;
    stroke: currentColor; fill: none;
    stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round;
  }

  /* color invert toggle */
  .theme-toggle {
    width: 44px; height: 24px;
    background: var(--toggle-bg);
    border-radius: 12px;
    border: none;
    cursor: pointer;
    position: relative;
    transition: background 0.3s;
    flex-shrink: 0;
  }
  .theme-toggle::after {
    content: '';
    position: absolute;
    top: 3px; left: 3px;
    width: 18px; height: 18px;
    border-radius: 50%;
    background: var(--toggle-knob);
    transition: transform 0.3s cubic-bezier(0.34,1.56,0.64,1), background 0.3s;
  }
  [data-theme="light"] .theme-toggle::after {
    transform: translateX(20px);
  }

  /* ── MESSAGES AREA ── */
  .messages-wrap {
    grid-area: messages;
    overflow-y: auto;
    padding: 40px 40px 20px 40px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    scroll-behavior: smooth;
    scrollbar-width: none;
  }
  .messages-wrap::-webkit-scrollbar { display: none; }

  /* ── INTENTS SIDEBAR ── */
  .intents-panel {
    grid-area: intents;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-end;
    gap: 10px;
    padding: 20px 28px 20px 12px;
    min-width: 0;
    max-width: 180px;
  }

  .intent-btn {
    background: transparent;
    border: 1.5px solid var(--surface2);
    color: var(--text);
    font-family: var(--font);
    font-size: 13px;
    font-weight: 400;
    padding: 10px 20px;
    border-radius: 50px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.18s;
    letter-spacing: 0.01em;
    animation: intentIn 0.3s cubic-bezier(0.16,1,0.3,1) both;
  }
  .intent-btn:hover {
    background: var(--surface);
    border-color: var(--text-muted);
  }
  .intent-btn:disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }
  @keyframes intentIn {
    from { opacity: 0; transform: translateX(14px); }
    to   { opacity: 1; transform: translateX(0); }
  }

  /* ── LOADING STATE ── */
  .loading-state {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-end;
    gap: 12px;
    padding-bottom: 8px;
    color: var(--text-muted);
  }

  .loading-ring {
    width: 22px; height: 22px;
    border-radius: 50%;
    border: 1.5px solid var(--hairline);
    border-top-color: var(--text-muted);
    animation: spin 0.85s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  .loading-text {
    font-size: 12px;
    font-weight: 400;
    letter-spacing: 0.04em;
    color: var(--text-dim);
  }

  /* ── HERO INTRO (initial state) ── */
  .intro-block {
    display: flex;
    flex-direction: column;
    gap: 14px;
    padding-bottom: 4px;
    animation: msgIn 0.5s cubic-bezier(0.16,1,0.3,1) both;
  }

  .intro-dot {
    width: 14px; height: 14px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 0 3px rgba(130,201,138,0.2);
  }

  .intro-headline {
    font-size: 22px;
    font-weight: 300;
    line-height: 1.35;
    color: var(--text);
    max-width: 380px;
    letter-spacing: -0.01em;
  }

  .intro-sub {
    font-size: 13px;
    font-weight: 300;
    line-height: 1.65;
    color: var(--text-muted);
    max-width: 380px;
  }

  /* ── MESSAGE ROWS ── */
  .msg-row {
    display: flex;
    gap: 10px;
    animation: msgIn 0.3s cubic-bezier(0.16,1,0.3,1) both;
    max-width: 680px;
  }
  @keyframes msgIn {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .msg-row.user { flex-direction: row-reverse; align-self: flex-end; }

  /* avatar */
  .avatar {
    width: 26px; height: 26px;
    border-radius: 50%;
    flex-shrink: 0;
    display: grid; place-items: center;
    background: var(--surface);
    border: 1px solid var(--hairline);
    margin-top: 2px;
    overflow: hidden;
  }
  .avatar.user { background: var(--surface2); }
  .avatar svg {
    width: 12px; height: 12px;
    stroke: var(--text-muted); fill: none;
    stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round;
  }
  .avatar img { width: 100%; height: 100%; object-fit: cover; }

  /* bubbles */
  .bubble {
    padding: 10px 14px;
    border-radius: 14px;
    font-size: 13.5px;
    font-weight: 300;
    line-height: 1.65;
    color: var(--text);
    max-width: 520px;
    border: 1px solid var(--hairline);
  }
  .bubble.bot {
    background: var(--bubble-bot);
    border-radius: 4px 14px 14px 14px;
  }
  .bubble.user {
    background: var(--bubble-user);
    border-radius: 14px 4px 14px 14px;
  }

  /* typing indicator */
  .typing-bubble {
    display: flex;
    gap: 4px;
    padding: 12px 16px;
    background: var(--bubble-bot);
    border: 1px solid var(--hairline);
    border-radius: 4px 14px 14px 14px;
  }
  .typing-bubble span {
    width: 5px; height: 5px;
    border-radius: 50%;
    background: var(--text-dim);
    animation: bounce 1.2s ease-in-out infinite;
  }
  .typing-bubble span:nth-child(2) { animation-delay: 0.2s; }
  .typing-bubble span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes bounce {
    0%,80%,100% { transform: translateY(0); opacity: 0.4; }
    40%          { transform: translateY(-5px); opacity: 1; }
  }

  /* old-style inline choice buttons (fallback, hidden from view) */
  .choices {
    display: none; /* intent buttons now appear in sidebar */
  }

  /* card block */
  .card-block {
    display: flex;
    gap: 14px;
    background: var(--surface);
    border: 1px solid var(--hairline);
    border-radius: 12px;
    padding: 14px;
    max-width: 360px;
    animation: msgIn 0.3s both;
  }
  .card-block img { width: 72px; height: 72px; border-radius: 8px; object-fit: cover; flex-shrink: 0; }
  .card-title { font-size: 13px; font-weight: 500; color: var(--text); margin-bottom: 4px; }
  .card-desc  { font-size: 12px; font-weight: 300; color: var(--text-muted); line-height: 1.5; }

  /* ── INPUT BAR ── */
  .input-bar {
    grid-area: input;
    padding: 16px 28px 24px;
    background: var(--bg);
  }

  .input-inner {
    display: flex;
    align-items: flex-end;
    gap: 10px;
    background: var(--surface);
    border: 1px solid var(--hairline);
    border-radius: 50px;
    padding: 10px 14px;
    transition: border-color 0.2s;
  }
  .input-inner:focus-within {
    border-color: var(--text-dim);
  }

  .input-dot {
    width: 18px; height: 18px;
    border-radius: 50%;
    background: var(--surface2);
    flex-shrink: 0;
    margin-bottom: 2px;
  }

  textarea {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    resize: none;
    font-family: var(--font);
    font-size: 13.5px;
    font-weight: 300;
    color: var(--text);
    line-height: 1.5;
    max-height: 100px;
    overflow-y: auto;
  }
  textarea::placeholder { color: var(--text-dim); }

  .send-btn {
    width: 28px; height: 28px;
    background: var(--text);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: grid; place-items: center;
    flex-shrink: 0;
    margin-bottom: 1px;
    transition: opacity 0.15s, transform 0.15s;
  }
  .send-btn:hover { opacity: 0.8; transform: scale(1.05); }
  .send-btn:disabled { opacity: 0.25; cursor: not-allowed; transform: none; }
  .send-btn svg {
    width: 12px; height: 12px;
    stroke: var(--bg); fill: none;
    stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round;
  }

  /* ── FOOTER ── */
  .footer-bar {
    padding: 0 28px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--bg);
  }
  .footer-copy {
    font-size: 11px;
    color: var(--text-dim);
    font-weight: 300;
    letter-spacing: 0.02em;
  }
  .footer-love {
    font-size: 11px;
    color: var(--text-dim);
    font-weight: 300;
  }
</style>
</head>
<body>
<div class="page">

  <!-- HEADER -->
  <header>
    <a class="logo" href="#">
      <div class="logo-mark">
        <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="10" cy="14" r="5" fill="#e05040"/>
          <circle cx="18" cy="14" r="5" fill="#2d7a44" opacity="0.9"/>
        </svg>
      </div>
      <span class="logo-text">CTConsulting</span>
    </a>
    <div class="header-right">
      <div class="header-badge">
        <div class="dot-live"></div>
        <span id="status-text">AI Sustainability Agent · Beta</span>
      </div>
      <button class="restart-btn" onclick="restartConversation()" title="Restart">
        <svg viewBox="0 0 24 24"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
      </button>
      <button class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark" aria-label="Toggle theme"></button>
    </div>
  </header>

  <!-- MESSAGES -->
  <div class="messages-wrap" id="messages">
    <div class="loading-state" id="loader">
      <div class="loading-ring"></div>
      <div class="loading-text">Connecting…</div>
    </div>
  </div>

  <!-- INTENT BUTTONS SIDEBAR -->
  <div class="intents-panel" id="intents-panel">
    <!-- Dynamically populated -->
  </div>

  <!-- INPUT BAR -->
  <div class="input-bar">
    <div class="input-inner">
      <div class="input-dot"></div>
      <textarea id="chat-input" rows="1" placeholder="Ask something…" disabled></textarea>
      <button class="send-btn" id="send-btn" onclick="sendMessage()" disabled>
        <svg viewBox="0 0 24 24"><line x1="12" y1="19" x2="12" y2="5"/><polyline points="5 12 12 5 19 12"/></svg>
      </button>
    </div>
  </div>

</div>

<!-- FOOTER -->
<div class="footer-bar">
  <span class="footer-copy">© CTConsulting 2026</span>
  <span class="footer-love">Love this for us. ♡</span>
</div>

<script>
/* ══ THEME TOGGLE ══ */
function toggleTheme() {
  const html = document.documentElement;
  html.dataset.theme = html.dataset.theme === 'dark' ? 'light' : 'dark';
}

/* ══ CONFIG ══ */
const VF_API_KEY = 'VF.DM.67e3daf1cd00b0d3b9e70847.7lN3z7DkJL65aqRj';
const VF_BASE    = 'https://general-runtime.voiceflow.com';
const USER_ID    = 'user_' + Math.random().toString(36).slice(2, 9);

let isWaiting   = false;
let choicesLive = false;
let loaderEl    = document.getElementById('loader');
let typingEl    = null;

const messagesEl  = document.getElementById('messages');
const inputEl     = document.getElementById('chat-input');
const sendBtnEl   = document.getElementById('send-btn');
const statusEl    = document.getElementById('status-text');
const intentPanel = document.getElementById('intents-panel');

/* ══ VOICEFLOW API ══ */
async function vfInteract(action) {
  const res = await fetch(`${VF_BASE}/state/user/${USER_ID}/interact`, {
    method: 'POST',
    headers: {
      'Authorization': VF_API_KEY,
      'Content-Type':  'application/json',
      'versionID':     'production'
    },
    body: JSON.stringify({ action, config: { tts: false, stripSSML: true } })
  });
  if (!res.ok) throw new Error(`VF ${res.status}`);
  return res.json();
}

/* ══ TRACE PROCESSING ══ */
async function processTraces(traces) {
  removeLoader();
  clearIntents();

  for (const trace of traces) {
    if (trace.type === 'text' || trace.type === 'speak') {
      const msg = trace.payload?.message || trace.payload?.slate?.content
        ?.flatMap(b => b.children?.map(c => c.text || '') || []).join('') || '';
      if (msg.trim()) {
        await showTyping(340);
        appendBotBubble(msg);
      }
    } else if (trace.type === 'choice') {
      const labels = (trace.payload?.buttons || []).map(b => b.name || b.request?.payload?.label || '').filter(Boolean);
      if (labels.length) { appendIntentButtons(labels); choicesLive = true; }
    } else if (trace.type === 'visual') {
      appendCard(trace.payload?.image, trace.payload?.title, trace.payload?.description);
    } else if (trace.type === 'end') {
      setInput(false);
    }
  }
}

/* ══ RENDER ══ */
function appendBotBubble(text) {
  const row = document.createElement('div');
  row.className = 'msg-row';
  row.innerHTML = `
    <div class="avatar bot"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%232d2d2d'/%3E%3Ccircle cx='11' cy='16' r='5' fill='%23e05040'/%3E%3Ccircle cx='21' cy='16' r='5' fill='%232d7a44' opacity='0.9'/%3E%3C/svg%3E" alt="CT"/></div>
    <div class="bubble bot">${escHtml(text)}</div>
  `;
  messagesEl.appendChild(row);
  scrollBottom();
}

function appendUserBubble(text) {
  const row = document.createElement('div');
  row.className = 'msg-row user';
  row.innerHTML = `
    <div class="avatar user">
      <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
    </div>
    <div class="bubble user">${escHtml(text)}</div>
  `;
  messagesEl.appendChild(row);
  scrollBottom();
}

let typingElRef = null;
function showTyping(delay = 300) {
  return new Promise(resolve => {
    removeLoader();
    const row = document.createElement('div');
    row.className = 'msg-row';
    row.innerHTML = `
      <div class="avatar bot"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%232d2d2d'/%3E%3Ccircle cx='11' cy='16' r='5' fill='%23e05040'/%3E%3Ccircle cx='21' cy='16' r='5' fill='%232d7a44' opacity='0.9'/%3E%3C/svg%3E" alt="CT"/></div>
      <div class="typing-bubble"><span></span><span></span><span></span></div>
    `;
    typingElRef = row;
    messagesEl.appendChild(row);
    scrollBottom();
    setTimeout(() => {
      if (typingElRef) { typingElRef.remove(); typingElRef = null; }
      resolve();
    }, delay);
  });
}

function appendIntentButtons(labels) {
  clearIntents();
  labels.forEach((label, i) => {
    const btn = document.createElement('button');
    btn.className = 'intent-btn';
    btn.textContent = label;
    btn.style.animationDelay = `${i * 60}ms`;
    btn.addEventListener('click', () => handleChoice(label));
    intentPanel.appendChild(btn);
  });
}

function clearIntents() {
  intentPanel.innerHTML = '';
}

function appendCard(imgSrc, title, desc) {
  removeLoader();
  const card = document.createElement('div');
  card.className = 'card-block';
  card.innerHTML = `
    ${imgSrc ? `<img src="${imgSrc}" alt="${escHtml(title||'')}"/>` : ''}
    <div class="card-body">
      ${title ? `<div class="card-title">${escHtml(title)}</div>` : ''}
      ${desc  ? `<div class="card-desc">${escHtml(desc)}</div>`   : ''}
    </div>
  `;
  messagesEl.appendChild(card);
  scrollBottom();
}

function removeLoader() {
  if (loaderEl && loaderEl.parentNode) { loaderEl.remove(); loaderEl = null; }
}

function setInput(enabled) {
  inputEl.disabled   = !enabled;
  sendBtnEl.disabled = !enabled;
  if (enabled) inputEl.focus();
}

function scrollBottom() {
  requestAnimationFrame(() => { messagesEl.scrollTop = messagesEl.scrollHeight; });
}

function escHtml(s) {
  return String(s)
    .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
    .replace(/\n/g,'<br>');
}

/* ══ INTERACTIONS ══ */
async function sendMessage(text) {
  const msg = (text !== undefined ? text : inputEl.value).trim();
  if (!msg || isWaiting) return;

  clearIntents();
  inputEl.value = '';
  inputEl.style.height = 'auto';
  appendUserBubble(msg);
  setInput(false);
  isWaiting = true;
  statusEl.textContent = 'Agent is thinking…';

  try {
    const traces = await vfInteract({ type: 'text', payload: msg });
    await processTraces(traces);
    statusEl.textContent = 'AI Sustainability Agent · Beta';
  } catch(e) {
    appendBotBubble('Something went wrong. Please try again.');
    statusEl.textContent = 'Connection issue';
    console.error(e);
  } finally {
    isWaiting = false;
    if (!choicesLive) setInput(true);
  }
}

async function handleChoice(label) {
  choicesLive = false;
  clearIntents();
  await sendMessage(label);
}

async function restartConversation() {
  if (isWaiting) return;
  messagesEl.innerHTML = '';
  clearIntents();
  const newLoader = document.createElement('div');
  newLoader.className = 'loading-state';
  newLoader.id = 'loader';
  newLoader.innerHTML = `<div class="loading-ring"></div><div class="loading-text">Restarting…</div>`;
  loaderEl = newLoader;
  messagesEl.appendChild(newLoader);
  setInput(false);
  isWaiting   = false;
  choicesLive = false;
  statusEl.textContent = 'Restarting…';

  try {
    await fetch(`${VF_BASE}/state/user/${USER_ID}`, {
      method: 'DELETE',
      headers: { 'Authorization': VF_API_KEY }
    });
  } catch(_) {}
  await launchConversation();
}

/* ══ BOOTSTRAP ══ */
async function launchConversation() {
  // Show intro content
  removeLoader();
  const intro = document.createElement('div');
  intro.className = 'intro-block';
  intro.innerHTML = `
    <div class="intro-dot"></div>
    <div class="intro-headline">Hey — and I believe in making sustainability actionable.</div>
    <div class="intro-sub">My time is spent exploring new ideas, moving my body, curating my spaces, and living in wellness. I'm an aerial acrobat, love to renovate, and dive into anything that makes life feel alive. Vulnerability is strength, imperfection is beautiful, and the best experiences are the ones we lean into with curiosity and care.</div>
  `;
  messagesEl.appendChild(intro);

  try {
    const traces = await vfInteract({ type: 'launch' });
    await processTraces(traces);
    statusEl.textContent = 'AI Sustainability Agent · Beta';
    setInput(true);
  } catch(e) {
    appendBotBubble('Unable to connect to the agent. Please refresh and try again.');
    statusEl.textContent = 'Connection error';
    console.error(e);
  }
}

/* ── keyboard ── */
inputEl.addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
});

/* ── auto-resize textarea ── */
inputEl.addEventListener('input', () => {
  inputEl.style.height = 'auto';
  inputEl.style.height = Math.min(inputEl.scrollHeight, 100) + 'px';
});

/* ── kick off on load ── */
launchConversation();
</script>
</body>
</html>
